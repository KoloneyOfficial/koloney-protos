syntax = "proto3";

package job;

import "google/protobuf/empty.proto";
import "google/protobuf/timestamp.proto";
import "v1/proto/job/entities.proto";

option go_package = "job;job";

// JobService provides job posting and management functionality
service JobService {
  // CreateJob creates a new job posting
  rpc CreateJob(CreateJobRequest) returns (Job) {}
  
  // GetJob retrieves a job by ID
  rpc GetJob(GetJobRequest) returns (Job) {}
  
  // UpdateJob updates an existing job posting
  rpc UpdateJob(UpdateJobRequest) returns (Job) {}
  
  // DeleteJob removes a job posting
  rpc DeleteJob(DeleteJobRequest) returns (google.protobuf.Empty) {}
  
  // ListJobs retrieves a paginated list of jobs
  rpc ListJobs(ListJobsRequest) returns (ListJobsResponse) {}
  
  // SearchJobs searches for jobs based on criteria
  rpc SearchJobs(SearchJobsRequest) returns (SearchJobsResponse) {}
  
  // UpdateJobStatus changes the status of a job
  rpc UpdateJobStatus(UpdateJobStatusRequest) returns (Job) {}
}

// CreateJobRequest contains the information needed to create a new job
message CreateJobRequest {
  string title = 1;
  string description = 2;
  string company_id = 3;
  string recruiter_id = 4;
  JobType type = 5;
  JobLocation location = 6;
  JobRequirements requirements = 7;
  JobBenefits benefits = 8;
  google.protobuf.Timestamp expires_at = 9;
}

// GetJobRequest contains the ID of the job to retrieve
message GetJobRequest {
  string job_id = 1;
}

// UpdateJobRequest contains the fields that can be updated for a job
message UpdateJobRequest {
  string job_id = 1;
  optional string title = 2;
  optional string description = 3;
  optional JobLocation location = 4;
  optional JobRequirements requirements = 5;
  optional JobBenefits benefits = 6;
  optional google.protobuf.Timestamp expires_at = 7;
}

// DeleteJobRequest contains the ID of the job to delete
message DeleteJobRequest {
  string job_id = 1;
}

// ListJobsRequest contains pagination and filtering parameters
message ListJobsRequest {
  int32 page_size = 1;
  string page_token = 2;
  optional string company_id = 3;
  optional string recruiter_id = 4;
  optional JobStatus status = 5;
  optional JobType type = 6;
}

// ListJobsResponse contains a page of jobs and pagination info
message ListJobsResponse {
  repeated Job jobs = 1;
  string next_page_token = 2;
  int32 total_count = 3;
}

// SearchJobsRequest contains search criteria
message SearchJobsRequest {
  string query = 1;
  int32 page_size = 2;
  string page_token = 3;
  optional string location = 4;
  optional JobType type = 5;
  optional int32 min_experience = 6;
}

// SearchJobsResponse contains search results
message SearchJobsResponse {
  repeated Job jobs = 1;
  string next_page_token = 2;
  int32 total_count = 3;
}

// UpdateJobStatusRequest contains the new status for a job
message UpdateJobStatusRequest {
  string job_id = 1;
  JobStatus status = 2;
}
